<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>5&nbsp; Main Traits – The MorFishJ User Manual</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./head_angles.html" rel="next">
<link href="./straighten_rotate.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-707d8167ce6003fca903bfe2be84ab7f.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-ddc6c960d7cf258e6f87f2f7c05410ee.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-cd9dfbf85d649b6f72edf88ba8363c65.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-ddc6c960d7cf258e6f87f2f7c05410ee.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<meta name="twitter:title" content="5&nbsp; Main Traits – The MorFishJ User Manual">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://mattiaghilardi.github.io/MorFishJ_manual/images/drawings/main_ref_lines_sketch.png">
<meta name="twitter:creator" content="@MattiaGhila">
<meta name="twitter:image:alt" content="Reference lines for main traits analysis">
<meta name="twitter:image-height" content="1184">
<meta name="twitter:image-width" content="2136">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./main_traits.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Main Traits</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./images/logo/MorFishJ_logo.png" alt="" class="sidebar-logo light-content py-0 d-lg-inline d-none">
      <img src="./images/logo/MorFishJ_logo.png" alt="" class="sidebar-logo dark-content py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">The MorFishJ User Manual</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/mattiaghilardi/MorFishJ_manual" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./The-MorFishJ-User-Manual.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Installation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./GUI.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">GUI</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./set_scale.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Image scale</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./straighten_rotate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Straighten and rotate</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./main_traits.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Main Traits</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./head_angles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Head Angles</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gut_traits.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Gut Traits</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#analysis" id="toc-analysis" class="nav-link active" data-scroll-target="#analysis"><span class="header-section-number">5.1</span> Analysis</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results"><span class="header-section-number">5.2</span> Results</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/mattiaghilardi/MorFishJ_manual/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-main_traits" class="quarto-section-identifier"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Main Traits</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The <code>Main Traits</code> analysis is the workhorse of <code>MorFishJ</code> as it performs a complete morphometric characterisation of fishes. It requires the user input to trace the outline of the body and pectoral fin, and to position some reference lines (<a href="#fig-main-ref-lines" class="quarto-xref">Figure&nbsp;<span>5.1</span></a>, <a href="#tbl-main-ref-lines" class="quarto-xref">Table&nbsp;<span>5.1</span></a>) and landmark points. The coordinates of these lines and points allow to extract 22 morphometric measurements described in <a href="#fig-main-traits" class="quarto-xref">Figure&nbsp;<span>5.2</span></a> and <a href="#tbl-main-traits-def" class="quarto-xref">Table&nbsp;<span>5.2</span></a>.</p>
<div id="fig-main-ref-lines" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center" alt="Reference lines for main traits analysis">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-main-ref-lines-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/drawings/main_ref_lines_sketch.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%" alt="Reference lines for main traits analysis">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-main-ref-lines-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.1: Reference lines traced on fish images for main traits analysis (see <a href="#tbl-main-ref-lines" class="quarto-xref">Table&nbsp;<span>5.1</span></a> for descriptions)
</figcaption>
</figure>
</div>
<div id="tbl-main-ref-lines" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-main-ref-lines-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.1: Description of reference lines traced on fish images for main traits analysis
</figcaption>
<div aria-describedby="tbl-main-ref-lines-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th>Reference line</th>
<th>Description</th>
<th>User input</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>Vertical line at the narrowest point of the caudal peduncle</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>B</td>
<td>Horizontal line touching the highest edge of the body (excluding fins)</td>
<td>No</td>
</tr>
<tr class="odd">
<td>C</td>
<td>Horizontal line touching the lowest edge of the body (excluding fins)</td>
<td>No</td>
</tr>
<tr class="even">
<td>D</td>
<td>Vertical line touching the most anterior tip of the body</td>
<td>No</td>
</tr>
<tr class="odd">
<td>E</td>
<td>Vertical line touching the most posterior tip of the caudal fin</td>
<td>No</td>
</tr>
<tr class="even">
<td>F</td>
<td>Horizontal line touching the highest edge of the caudal fin</td>
<td>No</td>
</tr>
<tr class="odd">
<td>G</td>
<td>Horizontal line touching the lowest edge of the caudal fin</td>
<td>No</td>
</tr>
<tr class="even">
<td>H</td>
<td>Vertical line at the base of the caudal fin (end of the vertebral column or posterior edge of the hypural plate). Parrotfishes (Labridae: Scarini) are an exception and the line should be placed between the last and second to last scale lying along the midline (<a href="http://www.fishbase.us/glossary/Glossary.php?q=standard+length&amp;sc">FishBase</a>)</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>I</td>
<td>Vertical line touching the posterior margin of the operculum</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>J</td>
<td>Horizontal line cutting the eye in halves</td>
<td>No<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></td>
</tr>
<tr class="odd">
<td>K</td>
<td>Vertical line cutting the eye in halves</td>
<td>No</td>
</tr>
<tr class="even">
<td>L</td>
<td>Vertical line at the pectoral fin insertion</td>
<td>Yes</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div id="fig-main-traits" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-main-traits-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 10.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-main-traits" style="flex-basis: 80.0%;justify-content: flex-start;">
<div id="fig-main-linear" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Linear measurements">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-main-linear-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/drawings/main_traits_sketch.png" class="img-fluid figure-img" data-ref-parent="fig-main-traits" alt="Linear measurements">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-main-linear-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Linear measurements
</figcaption>
</figure>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 10.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 10.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-main-traits" style="flex-basis: 80.0%;justify-content: flex-start;">
<div id="fig-main-areas" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Surface areas">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-main-areas-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/drawings/main_areas_sketch.png" class="img-fluid figure-img" data-ref-parent="fig-main-traits" alt="Surface areas">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-main-areas-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Surface areas
</figcaption>
</figure>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 10.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-main-traits-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.2: Morphometric parameters taken on fish images (see <a href="#tbl-main-traits-def" class="quarto-xref">Table&nbsp;<span>5.2</span></a> for descriptions)
</figcaption>
</figure>
</div>
<div id="tbl-main-traits-def" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-main-traits-def-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.2: Description of morphometric parameters taken on fish images
</figcaption>
<div aria-describedby="tbl-main-traits-def-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th>Code</th>
<th>Trait</th>
<th>Description</th>
<th>Reference</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TL</td>
<td>Total length</td>
<td>Length from the most anterior point of the body (D) to the most posterior point (E) (excluding the caudal filaments)</td>
<td><a href="http://www.fishbase.us/glossary/Glossary.php?q=total+length&amp;sc=is">FishBase</a></td>
</tr>
<tr class="even">
<td>SL</td>
<td>Standard length</td>
<td>Length from most anterior point of the body (D) to the the base of the caudal fin (H)</td>
<td><a href="http://www.fishbase.us/glossary/Glossary.php?q=standard+length&amp;sc=is">FishBase</a></td>
</tr>
<tr class="odd">
<td>MBd</td>
<td>Maximum body depth</td>
<td>Body depth at the deepest part of the body (excluding fins). Measured as the vertical distance between B and C</td>
<td><span class="citation" data-cites="Bellwood2014">Bellwood et al. (<a href="references.html#ref-Bellwood2014" role="doc-biblioref">2014</a>)</span></td>
</tr>
<tr class="even">
<td>Hl</td>
<td>Head length</td>
<td>Horizontal distance from most anterior tip of the head (D) to the posterior margin of the operculum (I)</td>
<td><span class="citation" data-cites="Barnett2006">Barnett, Bellwood, and Hoey (<a href="references.html#ref-Barnett2006" role="doc-biblioref">2006</a>)</span></td>
</tr>
<tr class="odd">
<td>Hd</td>
<td>Head depth</td>
<td>Head depth measured at the vertical of the orbit centroid along K</td>
<td><span class="citation" data-cites="Villeger2010">Villéger et al. (<a href="references.html#ref-Villeger2010" role="doc-biblioref">2010</a>)</span></td>
</tr>
<tr class="even">
<td>Ed</td>
<td>Eye diameter</td>
<td>Internal diameter of the orbit measured along J</td>
<td><span class="citation" data-cites="Bellwood2014">Bellwood et al. (<a href="references.html#ref-Bellwood2014" role="doc-biblioref">2014</a>)</span></td>
</tr>
<tr class="odd">
<td>Eh</td>
<td>Eye position</td>
<td>Vertical distance from the orbit centroid (J × K) to the bottom of the body (K × C)</td>
<td><span class="citation" data-cites="Touissant2016">Toussaint et al. (<a href="references.html#ref-Touissant2016" role="doc-biblioref">2016</a>)</span></td>
</tr>
<tr class="even">
<td>Snl</td>
<td>Snout length</td>
<td>Horizontal distance from the anterior margin of the orbit to the tip of the snout (D)</td>
<td><span class="citation" data-cites="Barnett2006">Barnett, Bellwood, and Hoey (<a href="references.html#ref-Barnett2006" role="doc-biblioref">2006</a>)</span></td>
</tr>
<tr class="odd">
<td>POC</td>
<td>Posterior of orbit centroid</td>
<td>Horizontal distance from the orbit centroid (J × K) to the posterior margin of the operculum (J × I)</td>
<td><span class="citation" data-cites="Bellwood2014">Bellwood et al. (<a href="references.html#ref-Bellwood2014" role="doc-biblioref">2014</a>)</span></td>
</tr>
<tr class="even">
<td>AO</td>
<td>Anterior of orbit</td>
<td>Horizontal distance from the anterior margin of the orbit to the anterior margin of the body along J (AO may be close, or equal to, zero in species with very anterior eyes)</td>
<td><span class="citation" data-cites="Bellwood2014">Bellwood et al. (<a href="references.html#ref-Bellwood2014" role="doc-biblioref">2014</a>)</span></td>
</tr>
<tr class="odd">
<td>EMd</td>
<td>Eye-mouth distance</td>
<td>Distance between the orbit centroid (J × K) to the anterior tip of the premaxilla</td>
<td><span class="citation" data-cites="Bellwood2014">Bellwood et al. (<a href="references.html#ref-Bellwood2014" role="doc-biblioref">2014</a>)</span></td>
</tr>
<tr class="even">
<td>EMa</td>
<td>Eye-mouth angle</td>
<td>Angle between EMd and a horizontal line intersecting the tip of the premaxilla</td>
<td><span class="citation" data-cites="Bellwood2014">Bellwood et al. (<a href="references.html#ref-Bellwood2014" role="doc-biblioref">2014</a>)</span></td>
</tr>
<tr class="odd">
<td>Mo</td>
<td>Oral gape position</td>
<td>Vertical distance from the tip of the premaxilla to the bottom of the body (C)</td>
<td><span class="citation" data-cites="Touissant2016">Toussaint et al. (<a href="references.html#ref-Touissant2016" role="doc-biblioref">2016</a>)</span></td>
</tr>
<tr class="even">
<td>Jl</td>
<td>Maxillary jaw length</td>
<td>Length from the tip of the premaxilla to the intersection between the maxilla and the mandible (i.e.&nbsp;the corner of the mouth)</td>
<td><span class="citation" data-cites="Touissant2016">Toussaint et al. (<a href="references.html#ref-Touissant2016" role="doc-biblioref">2016</a>)</span></td>
</tr>
<tr class="odd">
<td>Bs</td>
<td>Body surface area</td>
<td>Area of a polygon drawn following the contour of the body excluding fins, and up to the narrowest point of the caudal peduncle</td>
<td><span class="citation" data-cites="Bellwood2014">Bellwood et al. (<a href="references.html#ref-Bellwood2014" role="doc-biblioref">2014</a>)</span></td>
</tr>
<tr class="even">
<td>CPd</td>
<td>Caudal peduncle depth</td>
<td>Measured at the narrowest point of the caudal peduncle along A</td>
<td><span class="citation" data-cites="Villeger2010">Villéger et al. (<a href="references.html#ref-Villeger2010" role="doc-biblioref">2010</a>)</span></td>
</tr>
<tr class="odd">
<td>CFd</td>
<td>Caudal fin depth</td>
<td>Maximum depth of the caudal fin</td>
<td><span class="citation" data-cites="Villeger2010">Villéger et al. (<a href="references.html#ref-Villeger2010" role="doc-biblioref">2010</a>)</span></td>
</tr>
<tr class="even">
<td>CFs</td>
<td>Caudal fin surface area</td>
<td>Area of a polygon drawn following the contour of the caudal fin, with the anterior margin marked by a straight vertical line through the narrowest point of the caudal peduncle</td>
<td><span class="citation" data-cites="Villeger2010">Villéger et al. (<a href="references.html#ref-Villeger2010" role="doc-biblioref">2010</a>)</span></td>
</tr>
<tr class="odd">
<td>PFs</td>
<td>Pectoral fin surface area</td>
<td>Area of a polygon drawn following the contour of the pectoral fin</td>
<td><span class="citation" data-cites="Villeger2010">Villéger et al. (<a href="references.html#ref-Villeger2010" role="doc-biblioref">2010</a>)</span></td>
</tr>
<tr class="even">
<td>PFl</td>
<td>Pectoral fin length</td>
<td>Length of the longest ray of the pectoral fin</td>
<td><span class="citation" data-cites="Touissant2016">Toussaint et al. (<a href="references.html#ref-Touissant2016" role="doc-biblioref">2016</a>)</span></td>
</tr>
<tr class="odd">
<td>PFi</td>
<td>Pectoral fin position</td>
<td>Vertical distance from the upper insertion of the pectoral fin to the bottom of the body (C)</td>
<td><span class="citation" data-cites="Touissant2016">Toussaint et al. (<a href="references.html#ref-Touissant2016" role="doc-biblioref">2016</a>)</span></td>
</tr>
<tr class="even">
<td>PFb</td>
<td>Body depth at level of pectoral fin insertion</td>
<td>Body depth measured along L</td>
<td><span class="citation" data-cites="Villeger2010">Villéger et al. (<a href="references.html#ref-Villeger2010" role="doc-biblioref">2010</a>)</span></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<section id="analysis" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="analysis"><span class="header-section-number">5.1</span> Analysis</h2>
<p>Once the steps described in <a href="GUI.html#sec-setup" class="quarto-xref"><span>Section 2.2</span></a> are completed the screen will be populated with a number of windows:</p>
<ul>
<li>the ImageJ/Fiji main window</li>
<li>the MorFishJ GUI</li>
<li>a fish image (this is a duplicate of the raw image to prevent any modification)</li>
<li>the ROI manager</li>
<li>the <code>Image scale</code> dialog</li>
</ul>
<p>While the majority of the analysis is automated, there are a number of steps that require the user input:</p>
<ol type="1">
<li><p>If available, add a scale to the image as described in <a href="set_scale.html" class="quarto-xref">Chapter&nbsp;<span>3</span></a>.</p></li>
<li><p>Adjust the image if necessary as described in <a href="straighten_rotate.html" class="quarto-xref">Chapter&nbsp;<span>4</span></a>.</p></li>
<li><p>Select the orientation of the fish (i.e., whether the fish is facing left or right) from a drop-down list. This step is important for the correct automatic placement of some reference lines and points.</p></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/screenshots/orientation.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:30.0%" alt="Fish orientation"></p>
</figure>
</div>
<ol start="4" type="1">
<li>Select the fish outline following the instruction in the dialog. Trace a polygon around the body and caudal fin, excluding the dorsal, pelvic, and anal fins as in the example below. Also avoid including any portion of pectoral fin protruding from the body area. Once the selection is completed it can be adjusted as needed.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>The points that define the selection can be moved. To add a new point to the selection press <code>Shift</code> and click on an existing point. To remove one point press <code>Alt</code> and click on the point. See <a href="https://imagej.net/ij/docs/guide/146-19.html">Polygon Selection Tool</a>.</p>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/screenshots/fish_outline.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%" alt="Example of fish outline"></p>
</figure>
</div>
<ol start="5" type="1">
<li>Position reference line A at the narrowest point of the caudal peduncle. After clicking <code>OK</code> several automatic steps will split the outline in two, the body area (Bs) and caudal fin area (CFs), and add reference lines B-G.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/screenshots/ref_lineA.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%" alt="Example of reference line A"></p>
</figure>
</div>
<ol start="6" type="1">
<li>Position reference line H at the base of the caudal fin to mark the end of the standard length.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/screenshots/ref_lineH.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%" alt="Example of reference line H"></p>
</figure>
</div>
<ol start="7" type="1">
<li>Position reference line I at the posterior margin of the operculum.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/screenshots/ref_lineI.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%" alt="Example of reference line I"></p>
</figure>
</div>
<ol start="8" type="1">
<li>Trace an ellipse around the eye as in the example below (see <a href="https://imagej.net/ij/docs/guide/146-19.html">Elliptical Selection Tool</a> for specific instructions on how to use this tool). After clicking <code>OK</code> two new reference lines (J-K) are drawn perpendicular intersecting at the eye centroid.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/screenshots/eye_ellipse.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%" alt="Example of ellipse around the eye"></p>
</figure>
</div>
<ol start="9" type="1">
<li>Place a point at the insertion of the pectoral fin as in the example below.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/screenshots/pectoral_fin_insertion.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%" alt="Example of point at the pectoral fin insertion"></p>
</figure>
</div>
<p>After clicking <code>OK</code> reference line L appears passing through the selected point and 14 new traits are drawn and added to the ROI manager together with all reference lines.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Update from v0.2.2.</p>
<p>In fish with very anterior eyes, or positioned on top of the head (e.g.&nbsp;<em>Periophtalmus</em> spp. and many other blennies), the anterior edge of the orbit may lie outside the body outline. In such cases <code>AO = 0</code> and the ROI for AO is not saved.</p>
</div>
</div>
<ol start="10" type="1">
<li>Select the outline of the pectoral fin as in the example below. After clicking <code>OK</code> this is saved in the ROI manager as PFs.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/screenshots/pectoral_fin_outline.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%" alt="Example of pectoral fin outline"></p>
</figure>
</div>
<ol start="11" type="1">
<li>Trace a line on the longest ray of the pectoral fin. After clicking <code>OK</code> this is saved in the ROI manager as PFl.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/screenshots/pectoral_fin_length.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%" alt="Example of pectoral fin length"></p>
</figure>
</div>
<ol start="12" type="1">
<li>Place a point at the tip of the premaxilla (upper jaw) as in the example below. After clicking <code>OK</code> a new trait (Mo) is drawn and saved in the ROI manager.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/screenshots/tip_upper_jaw.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%" alt="Example of point at the tip of upper jaw"></p>
</figure>
</div>
<ol start="13" type="1">
<li>Place a point at the corner of the mouth.</li>
</ol>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The point should be placed at the intersection between the maxilla and the lower jaw (<a href="https://en.wikipedia.org/wiki/Fish_jaw#/media/File:FishKeyDay.jpg">fish skull anatomy</a>), not where the flesh of the upper and lower jaw meet! See the example below.</p>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="" aria-current="page"><strong>Correct</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href=""><strong>Incorrect</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/screenshots/mouth_corner_correct.png" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="Example of correct point at the mouth corner"></p>
</figure>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/screenshots/mouth_corner_wrong.png" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="Example of incorrect point at the mouth corner"></p>
</figure>
</div>
</div>
</div>
</div>
<p>After clicking <code>OK</code> the last three traits are drawn and saved in the ROI manager.</p>
<p>The analysis of the image is completed. In case of single image analysis a window named <code>Traits</code> containing all the results appears. This can be saved by clicking on <code>File -&gt; Save As...</code>. All ROIs in the ROI manager can also be saved as a zip file by clicking on <code>More &gt;&gt;&gt; -&gt; Save...</code>. In case of multiple image analysis a new row will be added to the results file, the ROIs are saved in their directory, where also the rotated or straightened images are saved as <code>.jpg</code> files. The current image is closed and the next is opened. Repeat steps 1-13 for all images.</p>
</section>
<section id="results" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="results"><span class="header-section-number">5.2</span> Results</h2>
<p>The results file/table contains one row for each image and 25 columns. The first column, <code>image_id</code>, is the name of the image without extension. The second column, <code>px.cm</code>, is the scale of the image in <em>pixels/cm</em>. This will be <code>NA</code> for images without scale. The columns 3-24 are the morphometric measurements described in <a href="#tbl-main-traits-def" class="quarto-xref">Table&nbsp;<span>5.2</span></a>. All linear measurements are in <em>pixels</em> and all areas in <em>pixels<sup>2</sup></em>. The angle <code>EMa</code> is in <em>degrees</em>. The last column, <code>time</code>, is the time spent to analyse the image (steps 1-13) in <em>seconds</em>. In case of multiple image analysis, before <code>time</code> there is an additional column, <code>remark</code>, which reports, if any, the observations written at the beginning of the analysis of each image.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Barnett2006" class="csl-entry" role="listitem">
Barnett, A., D. R. Bellwood, and A. S. Hoey. 2006. <span>“Trophic Ecomorphology of Cardinalfish.”</span> <em>Marine Ecology Progress Series</em> 322: 249–57. <a href="https://doi.org/10.3354/meps322249">https://doi.org/10.3354/meps322249</a>.
</div>
<div id="ref-Bellwood2014" class="csl-entry" role="listitem">
Bellwood, D. R., C. H. R. Goatley, S. J. Brandl, and O. Bellwood. 2014. <span>“<span class="nocase">Fifty million years of herbivory on coral reefs: fossils, fish and functional innovations</span>.”</span> <em>Proceedings of the Royal Society B: Biological Sciences</em> 281 (1781): 20133046. <a href="https://doi.org/10.1098/rspb.2013.3046">https://doi.org/10.1098/rspb.2013.3046</a>.
</div>
<div id="ref-Touissant2016" class="csl-entry" role="listitem">
Toussaint, A., N. Charpin, S. Brosse, and S. Villéger. 2016. <span>“Global Functional Diversity of Freshwater Fish Is Concentrated in the Neotropics While Functional Vulnerability Is Widespread.”</span> <em>Scientific Reports</em> 6: 22125. <a href="https://doi.org/10.1038/srep22125">https://doi.org/10.1038/srep22125</a>.
</div>
<div id="ref-Villeger2010" class="csl-entry" role="listitem">
Villéger, S., J. R. Miranda, D. F. Hernández, and D. Mouillot. 2010. <span>“Contrasting Changes in Taxonomic Vs. Functional Diversity of Tropical Fish Communities After Habitat Degradation.”</span> <em>Ecological Applications</em> 20 (6): 1512–22. <a href="https://doi.org/10.1890/09-1310.1">https://doi.org/10.1890/09-1310.1</a>.
</div>
</div>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>The user has to trace an ellipse around the eye and lines J and K will be automatically drawn from the coordinates of this selection.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/mattiaghilardi\.github\.io\/MorFishJ_manual\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./straighten_rotate.html" class="pagination-link" aria-label="Straighten and rotate">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Straighten and rotate</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./head_angles.html" class="pagination-link" aria-label="Head Angles">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Head Angles</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>The content of this manual is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Attribution-NonCommercial-ShareAlike 4.0 International license (CC BY-NC-SA 4.0)</a> <i class="fa-brands fa-creative-commons" aria-hidden="true"></i> <i class="fa-brands fa-creative-commons-by" aria-hidden="true"></i> <i class="fa-brands fa-creative-commons-nc" aria-hidden="true"></i> <i class="fa-brands fa-creative-commons-sa" aria-hidden="true"></i></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/mattiaghilardi/MorFishJ_manual/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Made with <i class="fa-brands fa-quarto" aria-hidden="true"></i> <a href="https://quarto.org/">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>