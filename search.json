[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "The MorFishJ User Manual",
    "section": "",
    "text": "Status of the manual\n\n\n\nHi there! This manual is a work-in-progress.\n\n\nMorFishJ is an open-source software package for traditional morphometric analysis of fish from side view images in ImageJ. With MorFishJ you can collect morphological trait data from fish images in a standardised and reproducible way through a semi-automated procedure, which accelerates data collection and increases data accuracy by reducing user bias.\n\n\nWhile advances in modern morphometrics (landmarks configuration and outline analysis) have increasingly facilitated data acquisition and analysis, traditional morphometrics has not kept pace. Collection of traditional morphometric data from fish images is generally slow and not reproducible. A typical workflow in ImageJ is:\n\nOpen an image.\nAdjust the image if necessary (or do this beforehand with another software).\nDraw reference lines to help with trait measurement (Optional).\nMeasure traits one by one.\nSave results.\nClose the image (losing track of the work done).\nOpen the next image and repeat the procedure.\n\nAdditionally, traits are often defined and measured differently by different researchers as a standardised protocol does not exist yet, making it impractical to merge data obtained from multiple studies.\n\n\n\nMorFishJ allows users to perform a complete morphometric characterisation in a limited time while recording and storing all steps, and saving results in a ready-to-use format suitable for statistical analysis with multiple software. Analyses of large photographic databases are facilitated by allowing users to stop and restart their analyses without losing progress.\n\n\n\nThis manual is a step-by-step user guide to MorFishJ. It explains best practices for project organisation, walks through each implemented analysis, and provides detailed explanations and examples for specific steps."
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Installation",
    "section": "",
    "text": "Therefore, the installation of ImageJ (https://imagej.nih.gov/ij/download.html) or Fiji (https://imagej.net/software/fiji/downloads) is required before installing MorFishJ.\n\n\n\n\n\n\nWarning\n\n\n\nMorFishJ depends on ImageJ 1.53e, thus, if ImageJ/Fiji was previously installed, first check the current ImageJ version below the toolbar. If it is older than 1.53e, to update ImageJ click Help –> Update ImageJ…, choose the latest version and click OK. Then ImageJ/Fiji must be restarted.\n\n\nOnce ImageJ/Fiji is installed/updated, proceed with installing MorFishJ following these steps:\n\nDownload MorFishJ:\n\nfor people familiar with GitHub: clone or download the entire GitHub repository;\n\nfor people not familiar with GitHub: click here to go to the project’s main page on GitHub, click on the green button Code, then click on Download ZIP, thus extract the content.\n\n\nCopy the MorFishJ v0.0.1 folder in the ImageJ/plugins/ or Fiji.app/plugins/ directory.\n\nNow MorFishJ is installed. Open ImageJ/FIJI and click Plugins –> MorFishJ v0.0.1 –> MorFishJ GUI. The following GUI appears in the upper left corner of the screen.\n\n\n\n\n\n\n\n\n\n\n\nTip\n\n\n\nIn Fiji the Plugins menu is often crowded, thus it may be easier to use the Search field under the toolbar to find and start MorFishJ."
  },
  {
    "objectID": "GUI.html",
    "href": "GUI.html",
    "title": "2  GUI",
    "section": "",
    "text": "The GUI of MorFishJ provides a simple and direct access to all the morphometric analyses. Each analysis can be started by clicking on the appropriate button."
  },
  {
    "objectID": "GUI.html#morphometric-analyses",
    "href": "GUI.html#morphometric-analyses",
    "title": "2  GUI",
    "section": "2.1 Morphometric analyses",
    "text": "2.1 Morphometric analyses\nThree morphometric analyses are currently available in MorFishJ:\n\n\n\n\n\n\n Main Traits\n\n\n\nThe workhorse of MorFishJ. Performs a complete morphometric analysis measuring 22 traits that cover all body parts visible from side view images, excluding dorsal, pelvic, and anal fins.\n\n\n\n\n\n\n\n\n Head Angles\n\n\n\nIt allows to measure three head angles related to vision and feeding (Brandl and Bellwood 2013; Bellwood et al. 2014; Brandl, Robbins, and Bellwood 2015).\n\n\n\n\n\n\n\n\n Gut Traits\n\n\n\nIt allows to measure three intestinal traits related to fish diet (Ghilardi et al. 2021)."
  },
  {
    "objectID": "GUI.html#sec-setup",
    "href": "GUI.html#sec-setup",
    "title": "2  GUI",
    "section": "2.2 Single and multiple image analysis",
    "text": "2.2 Single and multiple image analysis\nEach analysis has three different buttons:\n\nSingle Image: to analyse only one image (may be useful for beginners to get used to each step before analysing the entire image database).\nMultiple Images…New: to start a new analysis of an image database.\nContinued Analysis: to continue analysing an image database from where it was last left.\n\n\n2.2.1 Single Image\n\n\n\n\n\n\nWarning\n\n\n\nAn image must be opened before starting a single image analysis.\n\n\nClicking on the Single Image button of the desired analysis before opening an image will display the following message.\n\n\n\n\n\nTo open an image click on File –> Open… or use the shortcut Ctrl+O or drag the image over the ImageJ GUI.\nOnce the image is opened click on the Single Image button of the desired analysis. The image is duplicated and all the following steps will be performed on the duplicated image to avoid any unwanted modification of the raw image. The ROI Manager window is automatically opened and the first dialog box appears, to either set the scale or adjust the image, depending on the type of analysis selected.\nThe steps required to perform the selected analysis are explained in the following chapters.\n\n\n2.2.2 Multiple Images\n\nNew analysis\nBefore starting to analyse an image database the new project should have a clear folder structure. MorFishJ does not require a fixed folder structure, but only an input directory where the raw images are stored and two output directories, one to save the ROIs and one to save the results and log files (although the same output directory could be used for all outputs). Therefore, you can set your own folder structure. However, it is advisable that each project has its own directory with the following structure.\n./ProjectName/\n├── raw_images\n│   ├── img1.JPG\n│   ├── img2.JPG\n│   ├── img3.JPG\n│   └── ...\n├── results\n└── ROIs\nThere are three subdirectories: one containing the raw images, one to save the ROIs and processed images, and one to save the results and log files.\nTo start a new analysis click on the Multiple Images...New button of the desired analysis. The following dialog box appears.\n\n\n\n\n\nUse the Browse button to add the path to the input directory where the raw images are stored, and the output directories where the ROIs and results will be saved. Alternatively, it is possible to drag the directories over the dialog box. By default the results file will be named Traits and will be saved in .csv format, but it is possible to change both the name and the extension, which can be changed to .txt through the drop-down list.\nOnce all the fields are completed click OK. Two files are created in the selected directory for the results:\n\na log file with the name TraitLog followed by the date of creation in dd_mm_yyyy format and including all the metadata required to restore the project.\na results file with the selected name and extension. Results are appended to this file at the completion of the analysis of each image.\n\n\n\n\n\n\n\nImportant\n\n\n\nDo not edit the TraitLog file by hand and do not change its directory!\n\n\nThe first image in the input directory is automatically opened and duplicated. All the following steps will be performed on the duplicated image to avoid any unwanted modification of the raw image. The ROI Manager window is automatically opened and the first dialog box appears, to either set the scale or adjust the image, depending on the type of analysis selected.\nThe steps required to perform the selected analysis are explained in:\n\nChapter 5: Main Traits\nChapter 6: Head Angles\nChapter 7: Gut Traits\n\n\n\nContinued analysis\nIt is possible to stop and restart each analysis without losing progress. Everything done until the last completed image is saved, thus, if the analysis is stopped before completing an image, only the steps performed on that image are lost.\nTo continue a project from where it was last left, click on the Continued Analysis button of the desired analysis. The following dialog box appears.\n\n\n\n\n\nUse the Browse button or drag the file over the dialog box to add the path to the TraitLog file of the project. Thus click OK. The project is restored and can be continued from the next image. The new results will be appended to the existing results file.\n\n\n\n\nBellwood, D. R., C. H. R. Goatley, S. J. Brandl, and O. Bellwood. 2014. “Fifty million years of herbivory on coral reefs: fossils, fish and functional innovations.” Proceedings of the Royal Society B: Biological Sciences 281 (1781): 20133046. https://doi.org/10.1098/rspb.2013.3046.\n\n\nBrandl, S. J., and D. R. Bellwood. 2013. “Morphology, sociality, and ecology: can morphology predict pairing behavior in coral reef fishes?” Coral Reefs 32 (3): 835–46. https://doi.org/10.1007/s00338-013-1042-0.\n\n\nBrandl, S. J., W. D. Robbins, and D. R. Bellwood. 2015. “Exploring the nature of ecological specialization in a coral reef fish community: morphology, diet and foraging microhabitat use.” Proceedings of the Royal Society B: Biological Sciences 282 (1815): 20151147. https://doi.org/10.1098/rspb.2015.1147.\n\n\nGhilardi, M., N. M. D. Schiettekatte, J. M. Casey, S. J. Brandl, S. Degregori, A. Mercière, F. Morat, Y. Letourneur, S. Bejarano, and V. Parravicini. 2021. “Phylogeny, body morphology, and trophic level shape intestinal traits in coral reef fishes.” Ecology and Evolution 11 (19): 13218–31. https://doi.org/10.1002/ece3.8045."
  },
  {
    "objectID": "set_scale.html",
    "href": "set_scale.html",
    "title": "3  Set scale",
    "section": "",
    "text": "Trace a straight line on a reference object and click OK.\n\n\n\n\n\n\nTip\n\n\n\nThe reference object can also be the fish itself if its length (standard, fork, or total) is known. In this case trace a line over the fish to select the appropriate length.\n\n\nThe following dialog box appears.\n\n\n\n\n\nEnter the known length of the traced line and select the unit from the drop-down list. Three options are available (mm, cm, and inch), but any unit will then be converted to cm. Thus all linear measurements will be saved in cm and areas in cm2.\nThe traced line will be stored in the ROI Manager as px.cm and then saved with all other ROIs. A column px.cm will also be included in the results file indicating the scale of the images in pixels/cm.\n\n\n\n\n\n\nWarning\n\n\n\nAt the moment it is not possible to run the Main Traits and Gut Traits analyses on images without a reference object or known fish length as setting the scale is required. However, in the upcoming update setting the scale will become optional and all images can be analysed."
  },
  {
    "objectID": "straighten_rotate.html",
    "href": "straighten_rotate.html",
    "title": "4  Straighten and rotate",
    "section": "",
    "text": "Two analyses, Main Traits and Head Angles, require the fish to be in a straight and horizontal position. For such analyses the software allows to adjust the image if required. For the Main Traits analysis this is the second step, after setting the scale (as described in Chapter 3), whereas for the Head Angles analysis it is the first step. The following dialog box appears.\nIt allows to select one of two options:\nTherefore, if the fish is not straight and horizontal, select the appropriate option and click OK. Otherwise, click OK without selecting any option and continue."
  },
  {
    "objectID": "straighten_rotate.html#straighten",
    "href": "straighten_rotate.html#straighten",
    "title": "4  Straighten and rotate",
    "section": "Straighten",
    "text": "Straighten\nWhen the fish is bent, select Straighten and click OK. The following dialog box appears together with the Line Width window.\n\n\n\n\n\nFollow the instructions given in the dialog box, create a segmented line selection, adjust the width and click OK. The fish will be straightened and in an horizontal position. The following figure shows an example of fish straightening.\n\nBeforeAfter\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTip\n\n\n\nSelecting Spline fit within the Line Width window can improve the selection and straightening of the fish.\n\n\n\n\n\n\n\n\nWarning\n\n\n\nIf the fish is overly bent, straightening can lead to deformation of the body which affects the measurement of the traits. Use this option with care."
  },
  {
    "objectID": "straighten_rotate.html#rotate",
    "href": "straighten_rotate.html#rotate",
    "title": "4  Straighten and rotate",
    "section": "Rotate",
    "text": "Rotate\nWhen the fish is straight but not horizontal, select Rotate and click OK. The following dialog box appears.\n\n\n\n\n\nFollow the instructions given in the dialog box, trace a line and click OK. The image will be rotated and, if the line was placed well, the fish will be in an horizontal position. The following figure shows an example of image rotation.\n\nBeforeAfter"
  },
  {
    "objectID": "main_traits.html",
    "href": "main_traits.html",
    "title": "5  Main Traits",
    "section": "",
    "text": "The Main Traits analysis is the workhorse of MorFishJ as it performs a complete morphometric characterisation of fishes. It requires the user input to trace the outline of the body and pectoral fin, and to position some reference lines (Figure 5.1, Table 5.1) and landmark points. The coordinates of these lines and points allow to extract 22 morphometric measurements described in Figure 5.2 and Table 5.2."
  },
  {
    "objectID": "main_traits.html#analysis",
    "href": "main_traits.html#analysis",
    "title": "5  Main Traits",
    "section": "5.1 Analysis",
    "text": "5.1 Analysis\nOnce the steps described in Section 2.2 are completed the screen will be populated with a number of windows:\n\nthe ImageJ/Fiji main window\nthe MorFishJ GUI\na fish image (this is a duplicate of the raw image to prevent any modification)\nthe ROI manager\nthe Set scale dialog\n\nWhile the majority of the analysis is automated, there are a number of steps that require the user input:\n\nSet the scale for the image as described in Chapter 3.\nAdjust the image if necessary as described in Chapter 4.\nSelect the orientation of the fish (i.e., whether the fish is facing left or right) from a drop-down list. This step is important for the correct automatic placement of some reference lines and points.\n\n\n\n\n\n\n\nSelect the fish outline following the instruction in the dialog. Trace a polygon around the body and caudal fin, excluding the dorsal, pelvic, and anal fins as in the example below. Also avoid including any portion of pectoral fin protruding from the body area. Once the selection is completed it can be adjusted as needed.\n\n\n\n\n\n\n\nTip\n\n\n\nThe points that define the selection can be moved. To add a new point to the selection press Shift and click on an existing point. To remove one point press Alt and click on the point. See Polygon Selection Tool.\n\n\n\n\n\n\n\n\nPosition reference line A at the narrowest point of the caudal peduncle. After clicking OK several automatic steps will split the outline in two, the body area (Bs) and caudal fin area (CFs), and add reference lines B-G.\n\n\n\n\n\n\n\nPosition reference line H at the base of the caudal fin to mark the end of the standard length.\n\n\n\n\n\n\n\nPosition reference line I at the posterior margin of the operculum.\n\n\n\n\n\n\n\nTrace an ellipse around the eye as in the example below (see Elliptical Selection Tool for specific instructions on how to use this tool). After clicking OK two new reference lines (J-K) are drawn perpendicular intersecting at the eye centroid.\n\n\n\n\n\n\n\nPlace a point at the insertion of the pectoral fin as in the example below.\n\n\n\n\n\n\nAfter clicking OK reference line L appears passing through the selected point and 14 new traits are drawn and added to the ROI manager together with all reference lines.\n\nSelect the outline of the pectoral fin as in the example below. After clicking OK this is saved in the ROI manager as PFs.\n\n\n\n\n\n\n\nTrace a line on the longest ray of the pectoral fin. After clicking OK this is saved in the ROI manager as PFl.\n\n\n\n\n\n\n\nPlace a point at the tip of the premaxilla (upper jaw) as in the example below. After clicking OK a new trait (Mo) is drawn and saved in the ROI manager.\n\n\n\n\n\n\n\nPlace a point at the corner of the mouth.\n\n\n\n\n\n\n\nImportant\n\n\n\nThe point should be placed at the intersection between the maxilla and the lower jaw (fish skull anatomy), not where the flesh of the upper and lower jaw meet! See the example below.\n\n\n\nCorrectIncorrect\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAfter clicking OK the last three traits are drawn and saved in the ROI manager.\nThe analysis of the image is completed. In case of single image analysis a window named Traits containing all the results appears. This can be saved by clicking on File -> Save As.... All ROIs in the ROI manager can also be saved as a zip file by clicking on More >>> -> Save.... In case of multiple image analysis a new row will be added to the results file, the ROIs are saved in their directory, where also the rotated or straightened images are saved as .jpg files. The current image is closed and the next is opened. Repeat steps 1-13 for all images."
  },
  {
    "objectID": "main_traits.html#results",
    "href": "main_traits.html#results",
    "title": "5  Main Traits",
    "section": "5.2 Results",
    "text": "5.2 Results\nThe results file/table contains one row for each image and 25 columns. The first column, image_id, is the name of the image without extension. The second column, px.cm, is the scale of the image in pixels/cm. The columns 3-24 are the morphometric measurements described in Table 5.2. Currently, all linear measurements are in centimetres and all areas in squared centimetres. The last column, time, is the time spent to analyse the image (steps 1-13) in seconds.\n\n\n\n\nBarnett, A., D. R. Bellwood, and A. S. Hoey. 2006. “Trophic Ecomorphology of Cardinalfish.” Marine Ecology Progress Series 322: 249–57. https://doi.org/10.3354/meps322249.\n\n\nBellwood, D. R., C. H. R. Goatley, S. J. Brandl, and O. Bellwood. 2014. “Fifty million years of herbivory on coral reefs: fossils, fish and functional innovations.” Proceedings of the Royal Society B: Biological Sciences 281 (1781): 20133046. https://doi.org/10.1098/rspb.2013.3046.\n\n\nToussaint, A., N. Charpin, S. Brosse, and S. Villéger. 2016. “Global Functional Diversity of Freshwater Fish Is Concentrated in the Neotropics While Functional Vulnerability Is Widespread.” Scientific Reports 6: 22125. https://doi.org/10.1038/srep22125.\n\n\nVilléger, S., J. R. Miranda, D. F. Hernández, and D. Mouillot. 2010. “Contrasting Changes in Taxonomic Vs. Functional Diversity of Tropical Fish Communities After Habitat Degradation.” Ecological Applications 20 (6): 1512–22. https://doi.org/10.1890/09-1310.1."
  },
  {
    "objectID": "head_angles.html",
    "href": "head_angles.html",
    "title": "6  Head Angles",
    "section": "",
    "text": "The Head Angles analysis allows to extract three angles (Figure 6.1, Table 6.1) related to vision and feeding (Brandl and Bellwood 2013; Bellwood et al. 2014; Brandl, Robbins, and Bellwood 2015) from the coordinates of some reference lines and points (Figure 6.2, Table 6.2)."
  },
  {
    "objectID": "head_angles.html#analysis",
    "href": "head_angles.html#analysis",
    "title": "6  Head Angles",
    "section": "6.1 Analysis",
    "text": "6.1 Analysis\nOnce the steps described in Section 2.2 are completed the screen will be populated with a number of windows:\n\nthe ImageJ/Fiji main window\nthe MorFishJ GUI\na fish image (this is a duplicate of the raw image to prevent any modification)\nthe ROI manager\nthe Image adjustment dialog\n\nThis analysis has six steps that require the user input:\n\nAdjust the image if necessary as described in Chapter 4.\nSelect the orientation of the fish (i.e., whether the fish is facing left or right) from a drop-down list. This step is important for the correct automatic placement of the reference lines.\n\n\n\n\n\n\n\nPlace a point at the tip of the premaxilla (upper jaw) as shown below. After clicking OK this is saved in the ROI manager as P1.\n\n\n\n\n\n\n\nTrace an ellipse around the eye as shown below (see Elliptical Selection Tool for specific instructions on how to use this tool). After clicking OK five reference lines (L1-L5) are drawn.\n\n\n\n\n\n\n\nPlace a point at the intersection between line L5 and the dorsal margin of the snout as shown below. After clicking OK the first angle (Ha) is drawn and saved in the ROI manager.\n\n\n\n\n\n\n\nPlace a point at the intersection between line L5 and the ventral margin of the snout as shown below. After clicking OK the other two angles (Sa, EMa) are drawn and saved in the ROI manager.\n\n\n\n\n\n\nThe analysis of the image is completed. In case of single image analysis a window named Traits containing all the results appears. This can be saved by clicking on File -> Save As.... All ROIs in the ROI manager can also be saved as a zip file by clicking on More >>> -> Save.... In case of multiple image analysis a new row will be added to the results file, the ROIs are saved in their directory, where also the rotated or straightened images are saved as .jpg files. The current image is closed and the next is opened. Repeat steps 1-6 for all images."
  },
  {
    "objectID": "head_angles.html#results",
    "href": "head_angles.html#results",
    "title": "6  Head Angles",
    "section": "6.2 Results",
    "text": "6.2 Results\nThe results file/table contains one row for each image and 5 columns. The first column, image_id, is the name of the image without extension. The columns 2-4 are the angles described in Table 6.1 in degrees. The last column, time, is the time spent to analyse the image (steps 1-6) in seconds.\n\n\n\n\nBellwood, D. R., C. H. R. Goatley, S. J. Brandl, and O. Bellwood. 2014. “Fifty million years of herbivory on coral reefs: fossils, fish and functional innovations.” Proceedings of the Royal Society B: Biological Sciences 281 (1781): 20133046. https://doi.org/10.1098/rspb.2013.3046.\n\n\nBrandl, S. J., and D. R. Bellwood. 2013. “Morphology, sociality, and ecology: can morphology predict pairing behavior in coral reef fishes?” Coral Reefs 32 (3): 835–46. https://doi.org/10.1007/s00338-013-1042-0.\n\n\nBrandl, S. J., W. D. Robbins, and D. R. Bellwood. 2015. “Exploring the nature of ecological specialization in a coral reef fish community: morphology, diet and foraging microhabitat use.” Proceedings of the Royal Society B: Biological Sciences 282 (1815): 20151147. https://doi.org/10.1098/rspb.2015.1147."
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Barnett, A., D. R. Bellwood, and A. S. Hoey. 2006. “Trophic\nEcomorphology of Cardinalfish.” Marine Ecology Progress\nSeries 322: 249–57. https://doi.org/10.3354/meps322249.\n\n\nBellwood, D. R., C. H. R. Goatley, S. J. Brandl, and O. Bellwood. 2014.\n“Fifty million years of herbivory on coral\nreefs: fossils, fish and functional innovations.”\nProceedings of the Royal Society B: Biological Sciences 281\n(1781): 20133046. https://doi.org/10.1098/rspb.2013.3046.\n\n\nBrandl, S. J., and D. R. Bellwood. 2013. “Morphology, sociality, and ecology: can morphology\npredict pairing behavior in coral reef fishes?” Coral\nReefs 32 (3): 835–46. https://doi.org/10.1007/s00338-013-1042-0.\n\n\nBrandl, S. J., W. D. Robbins, and D. R. Bellwood. 2015. “Exploring the nature of ecological specialization in a\ncoral reef fish community: morphology, diet and foraging microhabitat\nuse.” Proceedings of the Royal Society B: Biological\nSciences 282 (1815): 20151147. https://doi.org/10.1098/rspb.2015.1147.\n\n\nGhilardi, M., N. M. D. Schiettekatte, J. M. Casey, S. J. Brandl, S.\nDegregori, A. Mercière, F. Morat, Y. Letourneur, S. Bejarano, and V.\nParravicini. 2021. “Phylogeny, body\nmorphology, and trophic level shape intestinal traits in coral reef\nfishes.” Ecology and Evolution 11 (19): 13218–31.\nhttps://doi.org/10.1002/ece3.8045.\n\n\nToussaint, A., N. Charpin, S. Brosse, and S. Villéger. 2016.\n“Global Functional Diversity of Freshwater Fish Is Concentrated in\nthe Neotropics While Functional Vulnerability Is Widespread.”\nScientific Reports 6: 22125. https://doi.org/10.1038/srep22125.\n\n\nVilléger, S., J. R. Miranda, D. F. Hernández, and D. Mouillot. 2010.\n“Contrasting Changes in Taxonomic Vs. Functional Diversity of\nTropical Fish Communities After Habitat Degradation.”\nEcological Applications 20 (6): 1512–22. https://doi.org/10.1890/09-1310.1."
  }
]